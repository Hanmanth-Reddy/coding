## DNS Fuction
- name resolution: how domain names are structured.
- name registration: how domain name is registred.
- name space:



Reverse DNS resolution:

Manipulate names resolution Order using `nsswitch.conf` file


Domain name format 
right to left

1) root
2) zone apex/named domains
    Top level domains(TLD)  com
    second level domain  example 
3) Third level domain (www, gov)


Fully qulified domain name (FQDN)

DNS tree 


Labels LDH rule (letter, digit, hypen)


A -to- M   --> 13 root servers each one has multiple copies 


Satic(local) Name resoultion: 
-----------------------------
Windows host file: `C:\Windows\System32\drivers\etc\hosts`
Linux hosts file: `/etc/hosts`


cat /etc/resolv.conf


resolvers - negetive caching 

DNS resoltion types -- > iterative and recursive 

DNS caching 

/var/cache/nscd/hosts

nscd -g

ipconfig /displaydns
ipconfig /flushdns


dnsmasq
systemd-resolved
unbound
nscd 

not cached requests







browser(cache) ---> Host (DNS cache, /etc/hosts file) ---> recusive query to --> DNS resolver (DNS cache)---interative query ----> root name server
                                                                                                                             <--- zone name servers
                                                                                                                            ----> TLD Servers 
                                                                                                                            <---- send authoritative name servers list
                                                                                                                            ---->  authrotatie anme server                


iterative query/Performs full DNS lookup chain


sudo systemd-resolve --flush-caches
sudo systemd-resolve --statistics






**nano /etc/nsswitch.conf**
```
# /etc/nsswitch.conf
#
# Name Service Switch configuration file.
# Determines the sources for common databases.

passwd:         files sss
group:          files sss
shadow:         files

hosts:          files dns myhostname
networks:       files

protocols:      files
services:       files
ethers:         files
rpc:            files

netgroup:       nis
```

**nano /etc/hosts**
```
# /etc/hosts
# Local static host name resolution

127.0.0.1       localhost
::1             localhost ip6-localhost ip6-loopback

192.168.1.10    web1.mydomain.local web1
192.168.1.11    db1.mydomain.local db1
10.0.0.5        backup-server

# Custom entries
172.16.0.100    appserver.internal appserver

```

**nano /etc/resolv.conf**
```
# Generated by NetworkManager
search mydomain.local corp.internal
nameserver 8.8.8.8
nameserver 1.1.1.1
options timeout:2 attempts:3 rotate
```


1. /etc/hosts           ← static hostname mapping
2. Local DNS cache      ← systemd-resolved / nscd / dnsmasq
3. /etc/resolv.conf     ← tells where to send DNS queries /Defines which DNS servers to use
4. External DNS servers ← recursive / authoritative lookup
5. /etc/nsswitch.conf	← Defines resolution order (which source first, second, etc.)



Browser → OS → Recursive Resolver → Root → TLD → Authoritative → Resolver → OS → Browser → Website

                     ┌────────────────────────────┐
                     │ You type www.example.com   │
                     │ in your browser            │
                     └──────────────┬─────────────┘
                                    │
                                    ▼
                   ┌────────────────────────────────┐
                   │ 1️⃣ Browser Cache               │
                   │ Has it cached the IP?           │
                   └──────────────┬──────────────────┘
                                  │No
                                  ▼
                   ┌────────────────────────────────┐
                   │ 2️⃣ OS Resolver Cache           │
                   │ (e.g., /etc/resolv.conf)        │
                   └──────────────┬──────────────────┘
                                  │No
                                  ▼
                   ┌────────────────────────────────┐
                   │ 3️⃣ Recursive Resolver (DNS)   │
                   │ e.g., 8.8.8.8 or 1.1.1.1       │
                   │ Performs recursive lookup      │
                   └──────────────┬──────────────────┘
                                  │
                                  ▼
                   ┌────────────────────────────────┐
                   │ 4️⃣ Root DNS Servers (13 sets)  │
                   │ Reply: “Ask .com TLD servers”  │
                   └──────────────┬──────────────────┘
                                  │
                                  ▼
                   ┌────────────────────────────────┐
                   │ 5️⃣ TLD Server (.com)          │
                   │ Reply: “Ask ns1.exampledns.com”│
                   └──────────────┬──────────────────┘
                                  │
                                  ▼
                   ┌────────────────────────────────┐
                   │ 6️⃣ Authoritative Server        │
                   │ Returns: www.example.com → IP   │
                   │          93.184.216.34          │
                   └──────────────┬──────────────────┘
                                  │
                                  ▼
                   ┌────────────────────────────────┐
                   │ 7️⃣ Resolver Caches Result      │
                   │ Sends IP to OS Resolver         │
                   └──────────────┬──────────────────┘
                                  │
                                  ▼
                   ┌────────────────────────────────┐
                   │ 8️⃣ OS + Browser Cache          │
                   │ Browser now has IP              │
                   └──────────────┬──────────────────┘
                                  │
                                  ▼
                   ┌────────────────────────────────┐
                   │ 9️⃣ Browser connects to server  │
                   │ TCP/UDP → 93.184.216.34         │
                   │ Loads website                   │
                   └────────────────────────────────┘




